<!doctype html>
<html lang="en" class="bg-gray-900" hidden>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Twitch Chat Popout</title>
    <meta name="author" content="qrayg - qrayg.com">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="favicon.ico" rel="icon" />
    <link href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;400;700;900&amp;display=swap" rel="stylesheet" />
  </head>
  <body class="text-gray-400">
    <main class="app h-screen flex relative z-20" v-cloak>
      <section class="m-auto p-4 w-full max-w-md">
        <h1 class="text-purple-400 flex items-center space-x-4 uppercase">
          <svg class="w-10 h-10 inline-block text-purple-500" role="presentation" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M391.17,103.47H352.54v109.7h38.63ZM285,103H246.37V212.75H285ZM120.83,0,24.31,91.42V420.58H140.14V512l96.53-91.42h77.25L487.69,256V0ZM449.07,237.75l-77.22,73.12H294.61l-67.6,64v-64H140.14V36.58H449.07Z"></path></svg>
          <b class="font-black text-2xl leading-none">Twitch Chat <small class="text-base block opacity-80">Popout Launcher</small></b>
          <b class="py-px flex-1 bg-purple-500 bg-opacity-50"></b>
        </h1>
        <fieldset class="py-8 relative">
          <label class="w-10 h-10 flex items-center justify-center absolute top-1/2 left-0 transform -translate-y-5" for="u"><b class="relative z-20">@</b></label>
          <input type="text" id="u" class="p-3 pl-10 w-full bg-white bg-opacity-10 text-gray-300 placeholder-current focus:(bg(purple-200 opacity-20) text-purple-100 outline-none ring(4 purple-200 opacity-20) placeholder(purple-100 opacity-30)) rounded-md transition duration-300" placeholder="Type username + enter/go" pattern="[a-zA-Z0-9-_]+" required />
        </fieldset>
        <ul class="list-favs list-none text-xs font-bold flex space-x-2">
          <li class="my-1 py-1 opacity-75"><small class="uppercase">Favs:</small></li>
          <li class="flex-1">
            <ul class="flex flex-wrap">
              <li v-for="(fav, index) in favs" class="m-1"><a :href="'https://twitch.tv/popout/'+ fav.user +'/chat'" class="px-2 py-1 hover:(bg(purple-600 opacity-75) text-white) focus:(bg(purple-600 opacity-75) text-white) inline-block rounded transition duration-300" :onclick="'window.open(this.href, \'chat-'+ index +'\', \'width=480,height=600,top=100,left=100,toolbar=0,location=0,status=0,menubar=0,scrollbars,resizable\'); return false;'"><i class="mr-px not-italic opacity-50">@</i>{{ fav.user }}</a></li>
            </ul>
          </li>
        </ul>
      </section>
    </main>
    <footer class="bg(black opacity-50) fixed inset-0 z-10 opacity-30"></footer>

    <div class="bg-gradient-to-b from-transparent via-transparent to-gray-800 fixed inset-0 z-[-1]" aria-hidden="true"><div class="bg(grid fixed) absolute inset-0"></div></div>

    <script src="../js/vue.js"></script>
    <script src="../js/twind.js"></script>
    <script src="https://unpkg.com/jquery/dist/jquery.min.js"></script>
    <script>

      // vue data
      var app = Vue.createApp({
        data() {
          return {
            favs: [
              // add/remove your own favs
              { user: 'sdshepard', },
              { user: 'chainbrain', },
              { user: 'mcrocklin', },
              { user: 'mst3k', },
            ]
          }
        }
      });
      app.mount('.app');

      // jquery logic
      $(function(){
        $('#u').on('keyup', function(e){
          // do stuff when enter is pressed
          if(e.key === 'Enter' || e.keyCode === 13){
            if($(this).val() != ''){
              var username = $(this).val().replace(' ', '');
              window.open('https://twitch.tv/popout/'+ username +'/chat', 'chat-'+ username +'', 'width=480,height=600,top=100,left=100,toolbar=0,location=0,status=0,menubar=0,scrollbars,resizable');
            }
          }
        }).on('keypress', function(e){
          // prevent spaces
          if(e.key === 'Space' || e.keyCode === 32){
            return false;
          }
        });
      });

      twind.setup({
        mode: "silent",
        theme: {
          extend: {
            colors: {
              gray: twindColors.coolGray,
            },
            fontFamily: (theme) => ({ sans: 'Inter,'+ theme('fontFamily.sans') }),
          },
        },
      })
      twind.tw(() => ({
        '@global': {
          ':root v-cloak': { '@apply': 'hidden', },
          '.bg-grid': { 'background-image': 'url("data:image/svg+xml,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 4 4\' width=\'4\' height=\'4\'><rect x=\'0\' y=\'0\' width=\'2\' height=\'2\' fill=\'rgba(5,5,5,.33)\'></rect></svg>")', },
        }
      }))
      twindObserve.observe(document.documentElement);
      document.documentElement.removeAttribute('hidden');

    </script>
  </body>
</html>